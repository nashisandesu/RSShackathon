<!doctype html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <title>ウミガメモード</title>
    <script type="text/javascript">
        let initialElapsedTime = {{ elapsed_time }};
        let startTime = new Date().getTime() / 1000 - initialElapsedTime;

        function updateTime() {
            const now = new Date().getTime() / 1000;
            const elapsed = now - startTime;
            document.getElementById('timer').innerText = elapsed.toFixed(1);
        }

        setInterval(updateTime, 100);  // 100ミリ秒ごとに更新
    </script>
</head>

<body onload="updateTime()">
    <nav class="navbar bg-body-tertiary">
        <div class="container">
            <a class="navbar-brand" href="#">
                <img src="./static/img/neko.png" alt="" width="30" height="24">
                ねこまみれ.com
            </a>
        </div>
    </nav>


    <main>
        <div class="container my-5">
            <div class="text-center">

                <h1>ウミガメモード</h1>
                <p>質問を入力してください</p>
            </div>
            <form method="post" action="{{ url_for('mode_umigame') }}">
                <input type="text" name="question" class="form-control" placeholder="LLMに質問しよう!" required>
                <button type="button" class="btn btn-primary sr-only">送信</button>
            </form>

            <form method="post" action="{{ url_for('mode_umigame_answer') }}">
                <button type="submit" class="btn btn-success">答えがわかった！</button>
            </form>
            <p>経過時間: <span id="timer">{{ elapsed_time }}</span> 秒</p>
            <h2>これまでの質問と回答</h2>
            <div class="overflow-auto" style="height: 50vh;">

                <ul>
                    {% for q, a in qa_history %}
                    <div class="card">
                        <div class="card-header text-left">
                            Q{{loop.index}}:{{q}}
                        </div>
                        <ul class="list-group list-group-horizontal text-center">
                            <li
                                class="list-group-item flex-fill {% if 'Y' in a %}list-group-item-info{% else %}bg-light-subtle{% endif %}">
                                Yes</li>
                            <li
                                class="list-group-item flex-fill {% if 'N' in a %}list-group-item-info{% else %}bg-light-subtle{% endif %}">
                                No</li>
                        </ul>
                    </div>
                    <!-- <li>{{ loop.index }}: {{ q }} - {{ a }}</li> -->
                    {% endfor %}
                </ul>
            </div>
        </div>

    </main>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-geWF76RCwLtnZ8qwWowPQNguL3RmwHVBC9FhGdlKrxdiJJigb/j/68SIy3Te4Bkz"
        crossorigin="anonymous"></script>
</body>

</html>